\chapter{Fortran90の基礎４〜カプセル化〜}
この章では、大規模なプログラミングを行う上で重要な概念となる``カプセル化" という概念について学ぶ。
カプセル化とは、小さな問題を解決する機能を独立させそのインターフェースを提供することである。

これにより複雑な問題を複数の小さな問題に分割することができ、その論理フローを明瞭にすることができる。

\section{カプセル化の例}
%TODO 何か特殊関数のソースを引用する。
特殊関数の一つである＊＊＊を用いた計算を行いたいと仮定する。
以下にカプセル化したプログラムの例を示す。

実際に＊＊＊の値を計算するには、複雑な処理（図＊＊＊）が必要である。
この処理を構築するためには正確な数値計算的知識が必要であるが、
{\bfseries
  一度その処理を完成させてしまえば
}
、次回以降はその処理について頭を悩ます必要なく単に***と記述すればその処理を再利用できる。

このように、複雑な処理の内容を隠蔽し、そのインターフェースだけを提供することで、
開発者はその処理の内容にとらわれず、大枠の論理フローの構築に集中することができる。

\section{サブルーチン}
上記の例で用いた枠組みは``サブルーチン"と呼ばれるものであり、＊＊＊＊。
本章では、サブルーチンの文法の理解とそれを用いたプログラム開発法の習得を目的とする。

サブルーチンを用いるための文法は以下のとおりである。\\
{\ttfamily
  SUBROUTINE サブルーチン名（仮引数1,仮引数2,・・・）\\
  宣言部\\
  命令1\\
  命令2\\
  ・・・\\
  END SUBROUTINE サブルーチン名\\
}\\

\begin{enumerate}
\item サブルーチン名\\
サブルーチン名の付け方は通常の変数名と同じである。
\item 仮引数1,仮引数2,・・・\\
サブルーチン中で使用する仮の引数。この定義の中だけで有効なため、
プログラム中で使用している関数名も使用することができる。
\item 宣言部\\
サブルーチンおよびサブルーチン中で使用する変数（引数、戻り値含む）の型宣言が必要である。
入力用引数には「INTENT (IN)」を、出力用引数には「INTENT (OUT)」を、入出力両用引数には「INTENT (INOUT)」を指定する。
\item 命令\\
複数の引数について処理を行っても良いし、値をまったく返さず、何らかのタスクを行うだけの内容でも良い。\\
\end{enumerate}
